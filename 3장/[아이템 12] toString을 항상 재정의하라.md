## Object 클래스의 기본 toString의 기본 정의

```java
getClass().getName() + '@' + Integer.toHexString(hashCode())
```

이처럼 [클래스 이름@16진수로 표시한 해시코드]로 이루어져 있음.

⇒ 하지만 이는 유의미한 정보라고 보기 어려움

즉, 간결하면서 사람이 읽기 쉬운 형태의 유익한 정보를 반환하기 위해 하위 클래스에서 이 메서드를 재정의할 필요가 있음.

## toString과 디버깅

toString을 잘 구현한 클래스는 사용하기 쉽고, 그 클래스를 사용한 시스템은 디버깅이 쉽다.

println, printf, 문자열 연결 연산자(+), assert 구문에 넘길 때 or 디버거가 객체를 출력할 때 **자동**으로 불린다.

⇒ 컴포넌트 오류 메시지 로그 남기기 가능

실전에서 toString은 그 객체가 가진 주요 정보 모두를 반환하는 게 좋다.

ex) map 객체 출력시 : {Jenny=707-867-5309}

하지만 객체가 거대하다면 요약 정보를 담아주는게 좋다.

ex) 맨해튼 거주자 전화번호부(총 1487536개)

이처럼 주요 정보가 담기지 않으면, 쓸모 없어질 수도 있다.

ex) Assertion failure: expected {abc, 123}, but was {abc, 123}

//단언 실패: 예상값 {abc, 123}, 실젯값 {abc, 123}

## toString 포맷의 문서화

- 장점

포맷을 명시하면 그 객체는 표준적이고 명확해진다.

따라서 그 값을 그대로 입출력에 사용하거나, CSV 파일처럼 사람이 읽을 수 있는 데이터 객체로 저장할 수 있다.

명시한 포맷에 맞는 문자열, 객체를 상호 전환할 수 있는 정적 팩터리 or 생성자를 함께 제공해주면 좋다. ex) BigInteger, BigDecimal

- 단점

포맷을 한 번 명시하면 계속 그 포맷을 사용해서 파생 코드가 생기기 때문에 중간에 포맷을 바꾸게 되면 다른 코드들에 영향을 미친다.

⇒ 포맷을 명시하지 않으면 향후에 유연하게 대처 가능

## toString 포맷의 사용의도

- 포맷을 사용하는 경우

```java
/**
     * 이 전화번호의 문자열 표현을 반환한다.
     * 이 문자열은 "XXX-YYY-ZZZZ" 형태의 12글자로 구성된다.
     * XXX는 지역 코드, YYY는 프리픽스, ZZZZ는 가입자 번호다.
     * 각각의 대문자는 10진수 숫자 하나를 나타낸다.
     *
     * 전화번호의 각 부분의 값이 너무 작아서 자릿수를 채울 수 없다면,
     * 앞에서부터 0으로 채워나간다. 예컨대 가입자 번호가 123이라면
     * 전화번호의 마지막 네 문자는 "0123"이 된다.
     */
    @Override 
    public String toString() {
        return String.format("%03d-%03d-%04d",
                areaCode, prefix, lineNum);
   }
```

- 포맷을 사용하지 않는 경우

```java
/**
 * 이 약물에 관한 대락적인 설명을 반환한다.
 * 다음은 이 설명의 일반적인 형태이나,
 * 상세 형식은 정해지지 않았으며 향후 변경될 수 있다.
 *
 * "[약물 #9: 유형=사랑, 냄새=테레빈유, 겉모습=먹물]"
 */
 @Override
 public String toString() { ... }
```

이처럼 포맷에 대해 명확하게 설명이 있어야 맞춰서 코딩을 할 수 있다.

## toString의 정보를 주는 API

toString이 반환된 값에 포함된 정보를 주는 API 제공하자. 그렇지 않으면 toString의 반환값을 파싱해서 써야 한다.

정적 유틸리티 클래스나 대부분의 열거타입도 자바가 toString을 제공하니 재정의하지 않아도 된다.

하지만 하위 클래스들이 공유해야 할 문자열 표현이 있는 추상 클래스라면 toString을 재정의해줘야 한다.

## Summary

모든 구체 클래스에서 Object의 toString을 재정의하자. 상위 클래스에서 이미 재정의한 경우는 예외이다.

toString을 재정의한 클래스는 유용하고, 디버깅을 쉽게 해준다.

toString은 해당 객체를 명확하고, 가독성있게 반환해야 한다.
